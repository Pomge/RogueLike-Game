function HunterEnemy(t,e,i,o,n){Enemy.call(this,t,e,i,o,n)}function LinearEnemy(t,e,i,o,n){Enemy.call(this,t,e,i,o,n),this.speed=Math.random()<.5?1:-1}function Player(t,e,i,o){Entity.call(this,t,e,i,o)}function RandomEnemy(t,e,i,o,n){Enemy.call(this,t,e,i,o,n)}HunterEnemy.prototype.__proto__=Enemy.prototype,HunterEnemy.prototype.draw=function(t){this.__proto__.__proto__.draw.call(this,t),t.addClass("hunter")},HunterEnemy.prototype.step=function(t,e){let i=[];const o=t.width,n=t.height;let s=copyGameZone(t);for(s[this.i][this.j]=!1,i.push([{i:this.i,j:this.j}]);i.length>0;){let p=i.shift(),h=p[p.length-1],r=[[h.i+1,h.j+0],[h.i+0,h.j+1],[h.i-1,h.j+0],[h.i+0,h.j-1]];for(let h=0;h<r.length;h+=1){if(r[h][0]===e.i&&r[h][1]===e.j){let t=-1;if(p.length>1){const e=p[1];t=getDirectionCode(e.i-this.i,e.j-this.j),t===Action.UNKNOWN&&(e.i===n-1&&0===this.i&&(t=Action.UP),0===e.j&&this.j===o-1&&(t=Action.RIGHT),0===e.i&&this.i===n-1&&(t=Action.DOWN),e.j===o-1&&0===this.j&&(t=Action.LEFT))}return this.changeDirection(t),t}r[h][0]=mapTeleport(r[h][0],t.height),r[h][1]=mapTeleport(r[h][1],t.width),!1!==s[r[h][0]][r[h][1]]&&(s[r[h][0]][r[h][1]]=!1,i.push(p.concat({i:r[h][0],j:r[h][1]})))}}},LinearEnemy.prototype.__proto__=Enemy.prototype,LinearEnemy.prototype.draw=function(t){this.__proto__.__proto__.draw.call(this,t),t.addClass("linear")},LinearEnemy.prototype.step=function(t,e){let i=EnemyMoveType.UNKNOWN;const o=this.i,n=this.j;if(this.moveType==EnemyMoveType.HORIZONTAL){const e=mapTeleport(n+this.speed,t.width);t.gameZone[o][e].isEmpty?i=this.speed>0?Action.RIGHT:Action.LEFT:this.speed*=-1}else{const e=mapTeleport(o+this.speed,t.height);t.gameZone[e][n].isEmpty?i=this.speed>0?Action.DOWN:Action.UP:this.speed*=-1}return this.direction=this.speed,i},Player.prototype.__proto__=Entity.prototype,Player.prototype.drinkPotion=function(t){this.health<this.maxHealth&&(this.health+=t.buff)},Player.prototype.takeSword=function(t){this.power+=t.buff},Player.prototype.drawHealthBar=function(t){const e=Math.ceil(this.health/this.maxHealth*100),i=$("<div></div>");i.attr("class","player health"),i.css("width",e+"%");const o=$(`<p>${this.health} HP</p>`);o.attr("class","healthPoint"),t.append(o),t.append(i)},Player.prototype.draw=function(t){this.__proto__.__proto__.draw.call(this,t),t.addClass("player"),this.drawHealthBar(t)},RandomEnemy.prototype.__proto__=Enemy.prototype,RandomEnemy.prototype.draw=function(t){this.__proto__.__proto__.draw.call(this,t),t.addClass("random")},RandomEnemy.prototype.step=function(t,e){const i=this.i,o=this.j,n=t.gameZone,s=t.width,p=t.height;let h=[];i-1>=0?n[i-1][o].isEmpty&&h.push(Action.UP):i-1==-1&&n[p-1][o].isEmpty&&h.push(Action.UP),o+1<s?n[i][o+1].isEmpty&&h.push(Action.RIGHT):o+1===s&&n[i][0].isEmpty&&h.push(Action.RIGHT),i+1<p?n[i+1][o].isEmpty&&h.push(Action.DOWN):i+1===p&&n[0][o].isEmpty&&h.push(Action.DOWN),o-1>=0?n[i][o-1].isEmpty&&h.push(Action.LEFT):o-1==-1&&n[i][s-1].isEmpty&&h.push(Action.LEFT);const r=h.length,a=h[getRandomIntInRange(0,r-1)];return this.changeDirection(a),a};